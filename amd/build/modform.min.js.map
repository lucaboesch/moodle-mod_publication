{"version":3,"file":"modform.min.js","sources":["../src/modform.js"],"sourcesContent":["// This file is part of mod_grouptool for Moodle - http://moodle.org/\n//\n// It is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// It is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Mod form supplement.\n *\n * @module    mod_publication/modform\n * @package\n * @author    Simeon Naydenov (moninaydenov@gmail.com)\n * @copyright 2024 Academic Moodle Cooperation {@link http://www.academic-moodle-cooperation.org}\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'], function($) {\n    const FITEM_APPROVALFROM = '#fitem_id_approvalfromdate';\n    const FITEM_APPROVALTO = '#fitem_id_approvaltodate';\n    const FITEM_OBTAINSTUDENTAPPROVAL = '#fitem_id_obtainstudentapproval';\n    const FITEM_OBTAINGROUPAPPROVAL = '#fitem_id_obtaingroupapproval';\n    const SELECT_OBTAINSTUDENTAPPROVAL = '#id_obtainstudentapproval';\n    const SELECT_OBTAINGROUPAPPROVAL = '#id_obtaingroupapproval';\n    const SELECT_IMPORTFROM = '#id_importfrom';\n    const RADIO_MODE = 'input[type=\"radio\"][name=\"mode\"]';\n    const RADIO_MODE_CHECKED = 'input[type=\"radio\"][name=\"mode\"]:checked';\n    const TEAMASSIGNIDS = '#teamassignids';\n    const GROUP_AUTOMATIC = '-1';\n    const STUDENT_AUTOMATIC = '0';\n    const MODE_IMPORT = '1';\n    let teamAssignIds = [];\n\n    const $approvalFromDate = $(FITEM_APPROVALFROM);\n    const $approvalToDate = $(FITEM_APPROVALTO);\n    const $obtainStudentApproval = $(FITEM_OBTAINSTUDENTAPPROVAL);\n    const $obtainGroupApproval = $(FITEM_OBTAINGROUPAPPROVAL);\n    const $selectObtainStudentApproval = $(SELECT_OBTAINSTUDENTAPPROVAL);\n    const $selectObtainGroupApproval = $(SELECT_OBTAINGROUPAPPROVAL);\n    const $selectImportFrom = $(SELECT_IMPORTFROM);\n    const $radioMode = $(RADIO_MODE);\n\n\n    const changeMode = function() {\n        const mode = $(RADIO_MODE_CHECKED).val();\n        if (mode === MODE_IMPORT) {\n            const importFrom = $selectImportFrom.val();\n            if (teamAssignIds.indexOf(importFrom) !== -1) {\n                $obtainStudentApproval.attr('hidden', 'hidden').css('display', 'none');\n                $obtainGroupApproval.removeAttr('hidden').css('display', 'flex');\n            } else {\n                $obtainStudentApproval.removeAttr('hidden').css('display', 'flex');\n                $obtainGroupApproval.attr('hidden', 'hidden').css('display', 'none');\n            }\n        } else {\n            $obtainStudentApproval.removeAttr('hidden').css('display', 'flex');\n            $obtainGroupApproval.attr('hidden', 'hidden').css('display', 'none');\n        }\n        changeObtainStudentApproval();\n    };\n\n    const changeObtainStudentApproval = function() {\n        let isAutomatic = false;\n        if ($obtainStudentApproval.attr('hidden') !== 'hidden') {\n            isAutomatic = $selectObtainStudentApproval.val() === STUDENT_AUTOMATIC;\n        } else if ($obtainGroupApproval.attr('hidden') !== 'hidden') {\n            isAutomatic = $selectObtainGroupApproval.val() === GROUP_AUTOMATIC;\n        }\n        if (isAutomatic) {\n            $approvalFromDate.attr('hidden', 'hidden').css('display', 'none');\n            $approvalToDate.attr('hidden', 'hidden').css('display', 'none');\n        } else {\n            $approvalFromDate.removeAttr('hidden').css('display', 'flex');\n            $approvalToDate.removeAttr('hidden').css('display', 'flex');\n        }\n    };\n\n    const init = function() {\n        teamAssignIds = $(TEAMASSIGNIDS).data('assignids').toString().split(',');\n        $selectObtainStudentApproval.on('change', changeObtainStudentApproval);\n        $selectObtainGroupApproval.on('change', changeObtainStudentApproval);\n        $radioMode.on('change', changeMode);\n        $selectImportFrom.on('change', changeMode);\n        changeMode();\n    };\n\n    $(document).ready(function() {\n        init();\n    });\n});"],"names":["define","$","teamAssignIds","$approvalFromDate","$approvalToDate","$obtainStudentApproval","$obtainGroupApproval","$selectObtainStudentApproval","$selectObtainGroupApproval","$selectImportFrom","$radioMode","changeMode","val","importFrom","indexOf","attr","css","removeAttr","changeObtainStudentApproval","isAutomatic","document","ready","data","toString","split","on"],"mappings":";;;;;;;;;AAwBAA,iCAAO,CAAC,WAAW,SAASC,GAcxB,IAAIC,cAAgB,GAEpB,MAAMC,kBAAoBF,EAfC,8BAgBrBG,gBAAkBH,EAfC,4BAgBnBI,uBAAyBJ,EAfK,mCAgB9BK,qBAAuBL,EAfK,iCAgB5BM,6BAA+BN,EAfA,6BAgB/BO,2BAA6BP,EAfA,2BAgB7BQ,kBAAoBR,EAfA,kBAgBpBS,WAAaT,EAfA,oCAkBbU,WAAa,WAEf,GAfgB,MAcHV,EAlBU,4CAkBYW,MACT,CACtB,MAAMC,WAAaJ,kBAAkBG,OACM,IAAvCV,cAAcY,QAAQD,aACtBR,uBAAuBU,KAAK,SAAU,UAAUC,IAAI,UAAW,QAC/DV,qBAAqBW,WAAW,UAAUD,IAAI,UAAW,UAEzDX,uBAAuBY,WAAW,UAAUD,IAAI,UAAW,QAC3DV,qBAAqBS,KAAK,SAAU,UAAUC,IAAI,UAAW,QAErE,MACIX,uBAAuBY,WAAW,UAAUD,IAAI,UAAW,QAC3DV,qBAAqBS,KAAK,SAAU,UAAUC,IAAI,UAAW,QAEjEE,+BAGEA,4BAA8B,WAChC,IAAIC,aAAc,EAC4B,WAA1Cd,uBAAuBU,KAAK,UAC5BI,YAnCkB,MAmCJZ,6BAA6BK,MACI,WAAxCN,qBAAqBS,KAAK,YACjCI,YAtCgB,OAsCFX,2BAA2BI,OAEzCO,aACAhB,kBAAkBY,KAAK,SAAU,UAAUC,IAAI,UAAW,QAC1DZ,gBAAgBW,KAAK,SAAU,UAAUC,IAAI,UAAW,UAExDb,kBAAkBc,WAAW,UAAUD,IAAI,UAAW,QACtDZ,gBAAgBa,WAAW,UAAUD,IAAI,UAAW,UAa5Df,EAAEmB,UAAUC,OAAM,WARdnB,cAAgBD,EAnDE,kBAmDeqB,KAAK,aAAaC,WAAWC,MAAM,KACpEjB,6BAA6BkB,GAAG,SAAUP,6BAC1CV,2BAA2BiB,GAAG,SAAUP,6BACxCR,WAAWe,GAAG,SAAUd,YACxBF,kBAAkBgB,GAAG,SAAUd,YAC/BA,YAKJ,GACJ"}